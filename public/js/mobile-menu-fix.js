 document.addEventListener('DOMContentLoaded', function() { setTimeout(() => { initializeMobileMenu(); }, 100); }); function initializeMobileMenu() { const mobileMenuButton = document.querySelector('.mobile-menu-btn'); const mobileMenu = document.querySelector('.mobile-nav-menu'); const mobileOverlay = document.querySelector('.mobile-menu-overlay'); const body = document.body; if (!mobileMenuButton) { console.log('Mobile menu button not found'); return; } if (!mobileMenu) { console.log('Mobile menu not found'); return; } if (!mobileOverlay) { console.log('Mobile overlay not found'); return; } console.log('Mobile menu elements found, initializing...'); function openMenu() { console.log('Opening mobile menu...'); console.log('Menu element:', mobileMenu); console.log('Menu current display:', mobileMenu.style.display); console.log('Menu current right:', mobileMenu.style.right); mobileMenu.style.display = 'block'; mobileOverlay.style.display = 'block'; mobileMenu.classList.add('show-menu'); console.log('After setting display block - Menu display:', mobileMenu.style.display); body.classList.add('menu-open'); setTimeout(() => { mobileMenu.style.right = '0'; mobileOverlay.style.opacity = '1'; console.log('Animation applied - Menu right:', mobileMenu.style.right); console.log('Menu content:', mobileMenu.innerHTML.length, 'characters'); }, 10); if (window.Alpine) { const headerElement = mobileMenuButton.closest('[x-data]'); if (headerElement && headerElement._x_dataStack) { headerElement._x_dataStack[0].open = true; } } } function closeMenu() { console.log('Closing mobile menu...'); mobileMenu.style.right = '-100%'; mobileOverlay.style.opacity = '0'; setTimeout(() => { body.classList.remove('menu-open'); mobileMenu.classList.remove('show-menu'); mobileMenu.style.display = 'none'; mobileOverlay.style.display = 'none'; }, 300); if (window.Alpine) { const headerElement = mobileMenuButton.closest('[x-data]'); if (headerElement && headerElement._x_dataStack) { headerElement._x_dataStack[0].open = false; } } } function toggleMenu() { const isOpen = mobileMenu.style.display === 'block' && mobileMenu.style.right === '0px'; if (isOpen) { closeMenu(); } else { openMenu(); } } mobileMenuButton.addEventListener('click', function(e) { e.preventDefault(); e.stopPropagation(); console.log('Mobile menu button clicked'); toggleMenu(); }); mobileOverlay.addEventListener('click', function(e) { e.preventDefault(); console.log('Mobile overlay clicked'); closeMenu(); }); const closeButton = document.querySelector('.mobile-nav-close-btn'); if (closeButton) { closeButton.addEventListener('click', function(e) { e.preventDefault(); console.log('Mobile close button clicked'); closeMenu(); }); } const menuLinks = document.querySelectorAll('.mobile-nav-link, .mobile-sub-nav-link'); menuLinks.forEach(link => { link.addEventListener('click', function() { console.log('Mobile menu link clicked'); setTimeout(closeMenu, 100); }); }); document.addEventListener('keydown', function(e) { if (e.key === 'Escape' && mobileMenu.style.display === 'block') { console.log('Escape key pressed'); closeMenu(); } }); window.addEventListener('resize', function() { if (window.innerWidth > 768 && mobileMenu.style.display === 'block') { console.log('Window resized, closing menu'); closeMenu(); } }); console.log('Mobile menu initialized successfully'); } document.addEventListener('alpine:init', () => { console.log('Alpine.js initialized, re-initializing mobile menu...'); setTimeout(initializeMobileMenu, 200); }); document.addEventListener('livewire:load', () => { console.log('Livewire loaded, re-initializing mobile menu...'); setTimeout(initializeMobileMenu, 200); }); window.addEventListener('load', () => { console.log('Window loaded, ensuring mobile menu is initialized...'); setTimeout(initializeMobileMenu, 300); }); 