/* ===== Scroll Performance Optimization ===== */
/* تحسينات أداء السكرولينج ومنع المشاكل */

/* منع السكرول الأفقي */
html, body {
    overflow-x: hidden !important;
    max-width: 100vw !important;
}

/* تحسين أداء السكرول */
* {
    -webkit-overflow-scrolling: touch;
    scroll-behavior: smooth;
}

/* تحسين أداء العناصر المتحركة */
.will-change-transform {
    will-change: transform;
}

.will-change-opacity {
    will-change: opacity;
}

/* GPU acceleration للعناصر المتحركة */
.gpu-accelerated {
    transform: translateZ(0);
    -webkit-transform: translateZ(0);
    backface-visibility: hidden;
    -webkit-backface-visibility: hidden;
    perspective: 1000px;
    -webkit-perspective: 1000px;
}

/* تحسين أداء الصور أثناء السكرول */
img {
    transform: translateZ(0);
    -webkit-transform: translateZ(0);
}

/* منع القفز أثناء تحميل الصور */
img[loading="lazy"] {
    min-height: 100px;
    background: linear-gradient(135deg, #f3f4f6 0%, #e5e7eb 100%);
}

/* تحسين أداء العناصر الثابتة */
.sticky,
.fixed {
    transform: translateZ(0);
    -webkit-transform: translateZ(0);
    will-change: transform;
}

/* تحسين أداء الانيميشن */
@media (prefers-reduced-motion: no-preference) {
    .smooth-scroll {
        scroll-behavior: smooth;
    }
    
    .animate-on-scroll {
        animation-play-state: paused;
    }
    
    .animate-on-scroll.in-view {
        animation-play-state: running;
    }
}

/* تحسين أداء السكرول على الموبايل */
@media (max-width: 768px) {
    /* تقليل الانيميشن على الموبايل */
    * {
        animation-duration: 0.3s !important;
        transition-duration: 0.2s !important;
    }
    
    /* تحسين أداء السكرول */
    .mobile-optimized {
        -webkit-transform: translateZ(0);
        transform: translateZ(0);
        -webkit-overflow-scrolling: touch;
    }
    
    /* منع السكرول الأفقي */
    .container,
    .section-wrapper {
        overflow-x: hidden !important;
    }
}

/* تحسين أداء Breaking News */
.breaking-news,
.breaking-news-ticker {
    transform: translateZ(0);
    -webkit-transform: translateZ(0);
    backface-visibility: hidden;
    -webkit-backface-visibility: hidden;
    will-change: transform;
}

/* تحسين أداء السكرول للقوائم الطويلة */
.long-list {
    contain: layout style paint;
}

.long-list-item {
    contain: layout style;
}

/* Virtual Scrolling Helper */
.virtual-scroll-container {
    position: relative;
    overflow-y: auto;
    -webkit-overflow-scrolling: touch;
}

.virtual-scroll-spacer {
    position: absolute;
    top: 0;
    left: 0;
    width: 1px;
    pointer-events: none;
}

.virtual-scroll-content {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
}

/* Scroll Snap للأقسام */
@supports (scroll-snap-type: y mandatory) {
    .scroll-snap-container {
        scroll-snap-type: y mandatory;
        scroll-padding-top: 80px; /* للهيدر الثابت */
    }
    
    .scroll-snap-section {
        scroll-snap-align: start;
        scroll-snap-stop: always;
    }
}

/* تحسين أداء الظلال */
@media (max-width: 768px) {
    .shadow-sm,
    .shadow-md,
    .shadow-lg,
    .shadow-xl {
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1) !important;
    }
}

/* تحسين أداء البوردر */
.optimized-border {
    border: 1px solid transparent;
    background-clip: padding-box;
}

/* Debounce hover effects on mobile */
@media (hover: none) and (pointer: coarse) {
    .hover\:scale-105:hover,
    .hover\:scale-110:hover,
    .hover\:transform:hover {
        transform: none !important;
    }
    
    .hover\:shadow-xl:hover,
    .hover\:shadow-2xl:hover {
        box-shadow: none !important;
    }
}

/* Optimize paint areas */
.paint-optimized {
    contain: paint;
}

.layout-optimized {
    contain: layout;
}

.strict-optimized {
    contain: strict;
}

/* Reduce repaints during scroll */
.no-paint-on-scroll {
    will-change: transform;
    transform: translateZ(0);
}

/* Optimize fixed elements */
.fixed-optimized {
    transform: translateZ(0);
    will-change: transform;
    contain: layout style paint;
}

/* Scroll indicators */
.scroll-indicator {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    height: 3px;
    background: linear-gradient(to right, var(--primary-color) 0%, var(--secondary-color) 100%);
    transform: scaleX(0);
    transform-origin: left;
    transition: transform 0.1s linear;
    z-index: 9999;
}

/* Smooth scroll to top button */
.scroll-to-top {
    position: fixed;
    bottom: 20px;
    right: 20px;
    width: 50px;
    height: 50px;
    background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
    color: white;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    opacity: 0;
    visibility: hidden;
    transition: all 0.3s ease;
    transform: translateY(20px);
    z-index: 1000;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
}

.scroll-to-top.visible {
    opacity: 1;
    visibility: visible;
    transform: translateY(0);
}

.scroll-to-top:hover {
    transform: translateY(-3px);
    box-shadow: 0 6px 30px rgba(0, 0, 0, 0.3);
}

/* RTL optimizations */
[dir="rtl"] .scroll-to-top {
    right: auto;
    left: 20px;
} 